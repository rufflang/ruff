// Test system operation functions

print("Testing system operation functions...")

// Test env() - get environment variable
home := env("HOME")
print("env('HOME') = " + home)

if len(home) > 0 {
    print("✓ env('HOME') returns value")
} else {
    print("⚠ env('HOME') is empty (may not be set)")
}

// Test env with non-existent variable
nonexist := env("RUFF_NONEXISTENT_VAR_12345")
if len(nonexist) == 0 {
    print("✓ env() returns empty string for non-existent var")
} else {
    print("✗ env() should return empty for non-existent var")
}

// Test args() - get command-line arguments
// Note: Will be empty when run without args
cli_args := args()
print("args() count = " + len(cli_args))
print("✓ args() returns array (length may be 0)")

// Test sleep() - sleep for short duration
print("Testing sleep(100)... (100ms)")
start := now()
sleep(100)
end := now()
elapsed := (end - start) * 1000  // Convert to ms

print("Elapsed time: ~" + elapsed + "ms")

if elapsed >= 90.0 && elapsed <= 200.0 {
    print("✓ sleep(100) worked correctly")
} else {
    print("⚠ sleep timing may be imprecise: " + elapsed + "ms")
}

// Test execute() - run simple command
// Using commands that work on both Unix and Windows
result := execute("echo Hello from Ruff")
print("execute('echo Hello from Ruff'):")
print(result)

if contains(result, "Hello") {
    print("✓ execute() runs commands successfully")
} else {
    print("✗ execute() output unexpected")
}

// Test path existence check (testing a file we know exists)
// We'll test the current test file
current_file_exists := path_exists("tests/test_stdlib_system.ruff")
print("path_exists('tests/test_stdlib_system.ruff') = " + current_file_exists)

// System test note
print("")
print("Note: exit() not tested as it would terminate the program")
print("To test exit(), run: ruff -e 'exit(42)' and check exit code")

print("System operation tests completed!")
